<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Teste Minha Conta - Royal Broker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css"/>
</head>
<body class="login-body">
  <main class="login-center">
    <div class="login-card cascade login-compact hover-expand">
      <h2 class="rb-login-title rb-gold-strong">üß™ TESTE MINHA CONTA</h2>
      
      <div style="margin-bottom: 20px;">
        <h3>‚úÖ Modal Minha Conta Corrigido</h3>
        <p>Os campos agora bloqueiam caracteres inv√°lidos em tempo real:</p>
        
        <div style="background: #39d9820; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #39d98a;">
          <h4>‚úÖ Campo Nome Completo:</h4>
          <ul style="color: #39d98a; margin: 10px 0;">
            <li>Bloqueia n√∫meros em tempo real</li>
            <li>Bloqueia caracteres especiais em tempo real</li>
            <li>Permite apenas letras, espa√ßos e acentos</li>
            <li>Valida√ß√£o de colagem autom√°tica</li>
          </ul>
        </div>
        
        <div style="background: #39d9820; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #39d98a;">
          <h4>‚úÖ Campo WhatsApp:</h4>
          <ul style="color: #39d98a; margin: 10px 0;">
            <li>Bloqueia letras em tempo real</li>
            <li>Bloqueia caracteres especiais em tempo real</li>
            <li>Permite apenas n√∫meros (11 d√≠gitos)</li>
            <li>Formata√ß√£o autom√°tica (XX) XXXXX-XXXX</li>
            <li>Valida√ß√£o de colagem autom√°tica</li>
          </ul>
        </div>
      </div>
      
      <div style="margin-bottom: 20px;">
        <h3>üîß Teste dos Campos:</h3>
        
        <div style="background: #1a1a1a; padding: 15px; border-radius: 8px; margin: 10px 0;">
          <h4>üìù Nome Completo:</h4>
          <label>Nome Completo
            <input type="text" id="testeNome" class="rb-input input-royal-focus" placeholder="Digite seu nome completo" 
                   onkeypress="bloquearCaracteresNome(event)" onpaste="validarColagemNome(event)" ondrop="validarColagemNome(event)">
            <small class="hint" id="nomeHint"></small>
          </label>
          
          <div style="margin-top: 10px;">
            <h5>üß™ Testes para fazer:</h5>
            <ol style="color: #e0e0e0; margin: 10px 0; font-size: 14px;">
              <li>Tente digitar n√∫meros (devem ser bloqueados)</li>
              <li>Tente digitar caracteres especiais (devem ser bloqueados)</li>
              <li>Digite um nome v√°lido como "Jo√£o Silva"</li>
              <li>Tente colar texto com n√∫meros (devem ser removidos)</li>
            </ol>
          </div>
        </div>
        
        <div style="background: #1a1a1a; padding: 15px; border-radius: 8px; margin: 10px 0;">
          <h4>üì± WhatsApp:</h4>
          <label>WhatsApp
            <input type="text" id="testeTelefone" class="rb-input input-royal-focus" placeholder="(XX) XXXXX-XXXX" 
                   onkeypress="bloquearCaracteresTelefone(event)" onpaste="validarColagemTelefone(event)" ondrop="validarColagemTelefone(event)">
            <small class="hint" id="telefoneHint"></small>
          </label>
          
          <div style="margin-top: 10px;">
            <h5>üß™ Testes para fazer:</h5>
            <ol style="color: #e0e0e0; margin: 10px 0; font-size: 14px;">
              <li>Tente digitar letras (devem ser bloqueadas)</li>
              <li>Tente digitar caracteres especiais (devem ser bloqueados)</li>
              <li>Digite um telefone v√°lido como "11987654321"</li>
              <li>Observe a formata√ß√£o autom√°tica</li>
              <li>Tente colar texto com letras (devem ser removidas)</li>
            </ol>
          </div>
        </div>
      </div>
      
      <div style="display: flex; gap: 10px; flex-wrap: wrap;">
        <button class="btn-royal" onclick="testarValidacoes()">Testar Valida√ß√µes</button>
        <button class="btn-turq" onclick="window.location.href='portal.html'">Testar no Portal</button>
        <button class="btn-json" onclick="window.location.href='index.html'">Voltar √† Home</button>
      </div>
    </div>
  </main>
  
  <script>
    // ========= FUN√á√ïES DE BLOQUEIO PARA MINHA CONTA =========
    
    // Fun√ß√£o para bloquear caracteres inv√°lidos no campo nome
    function bloquearCaracteresNome(event) {
      const charCode = event.which ? event.which : event.keyCode;
      
      // Bloqueia n√∫meros (0-9)
      if (charCode >= 48 && charCode <= 57) {
        event.preventDefault();
        return false;
      }
      
      // Bloqueia caracteres especiais (exceto espa√ßo e acentos)
      if (charCode >= 33 && charCode <= 47) { // !"#$%&'()*+,-./
        event.preventDefault();
        return false;
      }
      
      if (charCode >= 58 && charCode <= 64) { // :;<=>?@
        event.preventDefault();
        return false;
      }
      
      if (charCode >= 91 && charCode <= 96) { // [\]^_`
        event.preventDefault();
        return false;
      }
      
      if (charCode >= 123 && charCode <= 126) { // {|}~
        event.preventDefault();
        return false;
      }
      
      // Permite apenas letras (a-z, A-Z), espa√ßos (32) e acentos
      return true;
    }
    
    // Fun√ß√£o para validar colagem no campo nome
    function validarColagemNome(event) {
      event.preventDefault();
      
      let texto = '';
      if (event.type === 'paste') {
        texto = (event.clipboardData || window.clipboardData).getData('text');
      } else if (event.type === 'drop') {
        texto = event.dataTransfer.getData('text');
      }
      
      // Remove n√∫meros e caracteres especiais, mantendo apenas letras, espa√ßos e acentos
      const textoLimpo = texto.replace(/[0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/g, '');
      
      // Aplica o texto limpo
      setTimeout(() => {
        const campo = event.target;
        campo.value = textoLimpo;
        validarCampoNome(campo);
      }, 10);
      
      return false;
    }
    
    // Fun√ß√£o para bloquear caracteres inv√°lidos no campo telefone
    function bloquearCaracteresTelefone(event) {
      const charCode = event.which ? event.which : event.keyCode;
      
      // Permite apenas n√∫meros (0-9), backspace, delete, tab, enter, setas
      if (charCode === 8 || charCode === 9 || charCode === 13 || 
          charCode === 37 || charCode === 38 || charCode === 39 || charCode === 40) {
        return true;
      }
      
      // Bloqueia tudo que n√£o for n√∫mero
      if (charCode < 48 || charCode > 57) {
        event.preventDefault();
        return false;
      }
      
      return true;
    }
    
    // Fun√ß√£o para validar colagem no campo telefone
    function validarColagemTelefone(event) {
      event.preventDefault();
      
      let texto = '';
      if (event.type === 'paste') {
        texto = (event.clipboardData || window.clipboardData).getData('text');
      } else if (event.type === 'drop') {
        texto = event.dataTransfer.getData('text');
      }
      
      // Remove tudo que n√£o for n√∫mero
      const textoLimpo = texto.replace(/\D/g, '');
      
      // Limita a 11 d√≠gitos
      const textoLimitado = textoLimpo.substring(0, 11);
      
      // Aplica o texto limpo
      setTimeout(() => {
        const campo = event.target;
        campo.value = textoLimitado;
        validarCampoTelefone(campo);
      }, 10);
      
      return false;
    }
    
    // Fun√ß√£o para formatar telefone
    function formatarTelefone(telefone) {
      const limpo = (telefone || "").replace(/\D/g, '');
      if (limpo.length <= 2) return limpo;
      if (limpo.length <= 7) return limpo.replace(/(\d{2})(\d)/, '($1) $2');
      return limpo.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
    }
    
    // Fun√ß√£o para validar o campo nome
    function validarCampoNome(campo) {
      const nome = campo.value;
      const hint = document.getElementById('nomeHint');
      
      if (!nome) {
        hint.textContent = '';
        hint.style.color = '';
        campo.style.borderColor = '';
        return;
      }
      
      // Valida√ß√£o rigorosa
      const nomeRegex = /^[a-zA-Z√Ä-√ø\u00C0-\u017F\s]+$/;
      if (!nomeRegex.test(nome)) {
        hint.textContent = '‚úó Nome deve conter apenas letras, espa√ßos e acentos';
        hint.style.color = '#ff6b6b';
        campo.style.borderColor = '#ff6b6b';
        return;
      }
      
      if (/[0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(nome)) {
        hint.textContent = '‚úó Nome n√£o pode conter n√∫meros ou caracteres especiais';
        hint.style.color = '#ff6b6b';
        campo.style.borderColor = '#ff6b6b';
        return;
      }
      
      const palavras = nome.split(' ').filter(palavra => palavra.length > 0);
      if (palavras.length < 2) {
        hint.textContent = '‚úó Digite o nome completo (nome e sobrenome)';
        hint.style.color = '#ff6b6b';
        campo.style.borderColor = '#ff6b6b';
        return;
      }
      
      hint.textContent = '‚úì Nome v√°lido';
      hint.style.color = '#39d98a';
      campo.style.borderColor = '#39d98a';
    }
    
    // Fun√ß√£o para validar o campo telefone
    function validarCampoTelefone(campo) {
      const telefone = campo.value;
      const hint = document.getElementById('telefoneHint');
      
      if (!telefone) {
        hint.textContent = '';
        hint.style.color = '';
        campo.style.borderColor = '';
        return;
      }
      
      const limpo = telefone.replace(/\D/g, '');
      
      if (limpo.length !== 11) {
        hint.textContent = '‚úó Telefone deve ter 11 d√≠gitos (DDD + 9 + n√∫mero)';
        hint.style.color = '#ff6b6b';
        campo.style.borderColor = '#ff6b6b';
        return;
      }
      
      const ddd = parseInt(limpo.substring(0, 2));
      if (ddd < 11 || ddd > 99) {
        hint.textContent = '‚úó DDD inv√°lido';
        hint.style.color = '#ff6b6b';
        campo.style.borderColor = '#ff6b6b';
        return;
      }
      
      if (limpo.charAt(2) !== '9') {
        hint.textContent = '‚úó N√∫mero deve come√ßar com 9 ap√≥s o DDD';
        hint.style.color = '#ff6b6b';
        campo.style.borderColor = '#ff6b6b';
        return;
      }
      
      hint.textContent = '‚úì Telefone v√°lido';
      hint.style.color = '#39d98a';
      campo.style.borderColor = '#39d98a';
      
      // Formata o telefone
      campo.value = formatarTelefone(limpo);
    }
    
    // Fun√ß√£o para testar todas as valida√ß√µes
    function testarValidacoes() {
      const campoNome = document.getElementById('testeNome');
      const campoTelefone = document.getElementById('testeTelefone');
      
      validarCampoNome(campoNome);
      validarCampoTelefone(campoTelefone);
    }
    
    // Adicionar valida√ß√£o em tempo real
    document.getElementById('testeNome').addEventListener('input', function() {
      validarCampoNome(this);
    });
    
    document.getElementById('testeTelefone').addEventListener('input', function() {
      validarCampoTelefone(this);
    });
    
    console.log('=== TESTE MINHA CONTA ===');
    console.log('‚úÖ Campo nome bloqueia n√∫meros e caracteres especiais');
    console.log('‚úÖ Campo telefone bloqueia letras e caracteres especiais');
    console.log('‚úÖ Valida√ß√£o em tempo real');
    console.log('‚úÖ Formata√ß√£o autom√°tica de telefone');
    console.log('‚úÖ Bloqueio de colagem de texto inv√°lido');
  </script>
</body>
</html>

