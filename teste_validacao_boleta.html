<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Teste de Valida√ß√£o da Boleta - Royal Broker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css"/>
</head>
<body class="login-body">
  <main class="login-center">
    <div class="login-card cascade login-compact hover-expand">
      <h2 class="rb-login-title rb-gold-strong">üß™ TESTE DE VALIDA√á√ÉO DA BOLETA</h2>
      
      <div style="margin-bottom: 20px;">
        <h3>‚úÖ Valida√ß√£o Rigorosa Implementada</h3>
        <p>Este teste demonstra que o sistema agora bloqueia ordens com valores incorretos:</p>
        
        <div style="background: #1a1a1a; padding: 15px; border-radius: 8px; margin: 10px 0;">
          <h4>üìä Pre√ßos Atuais dos Ativos:</h4>
          <ul style="color: #39d98a; margin: 10px 0;">
            <li>PETR4: R$ 30,38</li>
            <li>VALE3: R$ 73,21</li>
            <li>BBAS3: R$ 49,33</li>
            <li>ITUB4: R$ 32,33</li>
          </ul>
        </div>
        
        <div style="background: #ff6b6b20; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #ff6b6b;">
          <h4>üö´ O que foi corrigido:</h4>
          <ul style="color: #ff6b6b; margin: 10px 0;">
            <li>‚ùå Antes: Sistema aceitava R$ 1,00 para qualquer ativo</li>
            <li>‚ùå Antes: Executava ordens pelo pre√ßo de mercado</li>
            <li>‚úÖ Agora: Bloqueia valores incorretos</li>
            <li>‚úÖ Agora: S√≥ aceita pre√ßos exatos dos ativos</li>
          </ul>
        </div>
        
        <div style="background: #39d9820; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #39d98a;">
          <h4>‚úÖ Como funciona agora:</h4>
          <ul style="color: #39d98a; margin: 10px 0;">
            <li>Campo valor √© preenchido automaticamente</li>
            <li>Campo valor √© readonly (n√£o pode ser alterado)</li>
            <li>Valida√ß√£o rigorosa no backend</li>
            <li>M√∫ltiplas camadas de prote√ß√£o</li>
          </ul>
        </div>
      </div>
      
      <div style="margin-bottom: 20px;">
        <h3>üîß Teste da Valida√ß√£o</h3>
        <p>Para testar, abra o portal e tente:</p>
        <ol style="color: #e0e0e0; margin: 10px 0;">
          <li>Selecionar um ativo na boleta</li>
          <li>Verificar se o valor √© preenchido automaticamente</li>
          <li>Tentar alterar o valor (deve ser bloqueado)</li>
          <li>Enviar ordem com valor incorreto (deve ser rejeitada)</li>
        </ol>
      </div>
      
      <div style="display: flex; gap: 10px; flex-wrap: wrap;">
        <button class="btn-royal" onclick="window.location.href='portal.html'">Testar no Portal</button>
        <button class="btn-turq" onclick="window.location.href='teste_watchlist.html'">Testar na Watchlist</button>
        <button class="btn-json" onclick="window.location.href='index.html'">Voltar √† Home</button>
      </div>
    </div>
  </main>
  
  <script>
    // Simular dados de ativos para demonstra√ß√£o
    const ativosDemo = {
      'PETR4': 30.38,
      'VALE3': 73.21,
      'BBAS3': 49.33,
      'ITUB4': 32.33
    };
    
    // Demonstrar a valida√ß√£o
    function demonstrarValidacao() {
      const ativo = 'BBAS3';
      const valorIncorreto = 1.00;
      const valorCorreto = ativosDemo[ativo];
      
      console.log(`=== DEMONSTRA√á√ÉO DA VALIDA√á√ÉO ===`);
      console.log(`Ativo: ${ativo}`);
      console.log(`Valor incorreto tentado: R$ ${valorIncorreto}`);
      console.log(`Valor correto: R$ ${valorCorreto}`);
      console.log(`Diferen√ßa: R$ ${Math.abs(valorIncorreto - valorCorreto).toFixed(2)}`);
      console.log(`Resultado: ${Math.abs(valorIncorreto - valorCorreto) > 0.01 ? 'BLOQUEADO' : 'ACEITO'}`);
      console.log(`Mensagem: Valor inv√°lido! O pre√ßo atual de ${ativo} √© R$ ${valorCorreto.toFixed(2)}. Apenas valores exatos s√£o aceitos.`);
    }
    
    // Executar demonstra√ß√£o quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', demonstrarValidacao);
  </script>
</body>
</html>
